# Commerce Security & Governance Over privacy alliance

## 具体工作

- 建立 Github 仓库以及组织|7.11bhr
- 搭建隐语开发调试环境，能跑起来实例代码，主要 spu 和隐私求交|7.11-7.14all bhr 已完成
- Dataframe：|7.11-7.16all
  - 规定数据格式，确定需要的数据和能拿到的数据以及将拿到的数据转化为需要的数据
  - 设计接口及调用规范
- 实现功能：|7.16 晚 meeting
  - 卖家买家 id 共用 |8.7 下午 bhr
  - 提取 id 行为次数代码实现 |8.7 晚上 gph
  - 梯度设置 |8.8 bhr&gph
  - 模型设计 |8.10 zay
  - 水平联邦，垂直联邦实现 |
- 调试功能：
  - 隐私求交
  - 机器学习
  - 额度设置
- 综合功能：
  - 隐私求交
  - 机器学习
  - 额度设置
  - 优化项目
- 写项目书

  8.20 之前写完代码，10 天写项目书

## 工作时间线

![image](https://github.com/bbbbhrrrr/Commerce-Security-Governance-Over-privacy-alliance-CSGO-/assets/117459437/7799579b-8fdf-4278-8f36-ac6358e63680)

## 注意事项

# 代码格式化

参数命名规范，注释规范
边写代码边写文档

# 数据格式

唯一 id

- 生成数据集（参考淘宝订单格式+用户信息+退款信息/不同平台的格式）bhr/gph 7.21 之前
  - 特征过于明显：没有付款
    - 仅退款不退货
    - 先用后不付
    - 租用不还
    - 银行的信用体系
    - ？闲鱼黄牛恶意购买-只能检测恶意购买
      - 诈骗-付款不发货
      - 收货后仅支付订金
      - B-C、C-C 平台不同策略
  - 刷订单量
  - 加上额度和广告推荐
  - 加上银行和其他支付平台的信用

https://tianchi.aliyun.com/dataset?spm=a2c22.12281976.J_3941670930.19.7e0722fdrEtSvK

### 购物平台：

订单号
实名用户（身份证）
商品信息
应付金额
订单生成时间
付款时间
发货时间
收货时间
退款时间
退货时间
实付金额
退款金额

### 租用平台：

订单号
实名用户（身份证）
商品信息
商品金额
订单生成时间
付款时间
发货时间
收货时间
到期时间
发回时间
付款金额
退款金额

### 银行及其他支付平台的信用

用户（身份证）
信用评定
银行/支付平台

### 总共：

订单号
实名用户（身份证）
商品信息
商品金额
订单生成时间
付款时间
发货时间
收货时间
退款时间
退货时间
付款金额
退款金额
平台类型

## 安全模型

- 零信任：节点之间完全不信任
- 半诚实：假设节点不会塞假数据，保证原始数据不出域的情况先实现风控信息的共享

## 隐私求交 bhr/yjh 8.10

使用 kkrt16 模型
给所有节点做一个全连接，双方的隐私求交

## 梯度设置 bhr/gph

### 目标：

- 仅退款不退货的次数以及可以仅退款不退货的金额额度
- 限制租用额度
- 标注问题商家
- 各个平台信誉分降级

### 分级：

- 优先用户：长时间行为良好
- 普通用户：默认
- 风险用户：疑似有恶意行为
- 恶意用户：确认为恶意行为
- 封禁用户：恶意行为过多，不允许交易

id 行为总次数 仅退款不退货次数 租用不还次数 收货后仅支付订金次数 付款不发货次数 造成损失金额

### 总恶意行为次数评判：

x、y、z ->次数、金额、比例

总恶意行为次数=$$1/100 * 2 ^ {3* \sum p_i*f_i(x_i,y_i,z_i)}$$

基础公式：ln(x + ln(y) + e\*e^10z)

仅退款不退货次数、金额、比例：ln(x + ln(y) + e\*e^10z) 权重：40%
租用不还次数、金额、比例：ln(50\*x + e\*ln(y) + e\*e^10z) 权重：20%
收货后仅支付订金次数、金额、比例：ln(x + e\*ln(y) + e\*e^10z) 权重：30%
付款不发货次数、金额、比例：ln(x + e^ln(y) + 50\*e^10z) 权重：10%

### 梯度设置规则：

- 优先用户：一周内正常行为多于 10 次且没有恶意行为；或连续 4 次（一个月）都没有恶意行为且购物次数不少于 4 次；或连续 12 次（三个月）都没有恶意行为且购物次数不少于 10 次；或连续 24 次（半年）都没有恶意行为且次数不少于 15 次。
- 普通用户：没有恶意行为
- 风险用户：若总行为在 100 次以内，连续四次内恶意行为只有一次；若超过 100 次，恶意行为比例超过 1%
- 恶意用户：若总行为在 100 次以内，连续四次内恶意行为超过五次；若超过 100 次，恶意行为比例超过 5%
- 封禁用户：连续四次恶意行为超过 10 次

## 机器学习 zay/gzc/gph 8.10

可以考虑使用 hungging face

机器学习框架
类型：监督学习或半监督学习（半监督学习难度较大，看所需的数据规模和训练规模）
监督学习算法：回归分析，统计分析，分类。（若有新功能后期补充，这三个处理数据足够）
决策方法（暂定）：线性回归分析，GGM 树，神经网络（郑神），KNN 预测等

可视化呈现：Numpy，Pandas，Matplotlib，Scikit-Learn 等工具

用户信誉评估：回归分析（最简单方式，靠谱）

ps：数据的噪声预处理？

### 任务一：确定特征维度与分类数

若为垂直联邦，则不同平台拥有不同维度的特征。此处特征不包括用户的识别码，只包含有用的特征。

分类数即通过这一模型，可以将用户分成多少类，最终呈现效果为：向模型输入一组新的特征，模型输出这一特征符合各分类的概率。

### 任务二：设计神经网络

主要是怎么分层，怎么流，怎么调参。

还要设计 loss 函数。

### 任务三：训练，让模型收敛

其实就是调整神经网络各层各个节点的参数，让模型对“具有对应特征的样本”能够输出一个比较收敛的结果。

### 任务四：拆分，联邦

确定什么平台有什么特征，然后进行联邦，可以参考：[https://www.secretflow.org.cn/zh-CN/docs/secretflow/v1.5.0b0/tutorial/Split_Learning_for_bank_marketing](https://www.secretflow.org.cn/zh-CN/docs/secretflow/v1.5.0b0/tutorial/Split_Learning_for_bank_marketing)

## 结合联邦学习 all

找模型，否则找 2 人研究

初期找一人研究

## 额度设置 all 8.20
